#偏执度事件
add_namespace = TRI_paranoia
country_event = { #顾问被指控为不安定分子
	id = TRI_paranoia.1
	title = TRI_paranoia.1.t
	desc = TRI_paranoia.1.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.1.a
		TRI_unity_decrease_5 = yes
		TRI_purge_character = yes
		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.1.b

		trigger = {
			NOT = { has_political_power < 50 }
		}

		add_political_power = -50
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 200
			}
		}
	}
}
country_event = { #文职部员队伍中的阴谋
	id = TRI_paranoia.2
	title = TRI_paranoia.2.t
	desc = TRI_paranoia.2.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.2.a
		set_temp_variable = { TRI_unity_change = -2 }
		TRI_change_unity = yes
		add_timed_idea = {
			idea = TRI_inspected_administration
			days = 180
		}
		TRI_paranoia_decrease_10 = yes

		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.2.b

		trigger = {
			NOT = { has_political_power < 50 }
		}

		add_political_power = -50
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 200
			}
		}
	}
}
country_event = { #圣三一情报局的背叛？
	id = TRI_paranoia.3
	title = TRI_paranoia.3.t
	desc = TRI_paranoia.3.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.3.a
		set_temp_variable = { TRI_unity_change = -2 }
		TRI_change_unity = yes
		TRI_nagisa = {
			add_country_leader_trait = BA_TRI_nagisa_paranoid
		}
		add_to_variable = { TRI_nagisa_paranoia_modifier_increase = 1 }
		TRI_paranoia_decrease_30 = yes
		set_country_flag = {
			flag = TRI_paranoia_3_cd
			days = 240
		}

		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.3.b

		trigger = {
			NOT = { has_political_power < 75 }
		}

		add_political_power = -75
		TRI_paranoia_increase_20 = yes
		set_country_flag = {
			flag = TRI_paranoia_3_cd
			days = 240
		}
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 40 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.2
				has_political_power > 250
			}
		}
	}
}

unit_leader_event = { #将军被指控为不安定分子
	id = TRI_paranoia.11
	title = TRI_paranoia.11.t
	desc = TRI_paranoia.11.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.11.a
		TRI_unity_decrease_5 = yes
		TRI_purge_character = yes
		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.11.b

		trigger = {
			NOT = { has_political_power < 50 }
		}

		add_political_power = -50
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 200
			}
		}
	}
}
country_event = { #陆军成员中的流言
	id = TRI_paranoia.12
	title = TRI_paranoia.12.t
	desc = TRI_paranoia.12.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.12.a
		set_temp_variable = { TRI_unity_change = -2 }
		TRI_change_unity = yes
		add_ideas = TRI_inspected_army
		TRI_paranoia_decrease_10 = yes

		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.12.b

		trigger = {
			NOT = { has_political_power < 50 }
		}

		add_political_power = -50
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 200
			}
		}
	}
}
country_event = { #反破坏分子运动（陆军）
	id = TRI_paranoia.13
	title = TRI_paranoia.13.t
	desc = TRI_paranoia.13.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.13.a
		set_temp_variable = { TRI_unity_change = -2 }
		TRI_change_unity = yes
		add_timed_idea = {
			idea = TRI_training_activities_curtailed
			days = 180
		}
		TRI_paranoia_decrease_10 = yes

		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.13.b

		trigger = {
			NOT = { has_political_power < 60 }
		}

		add_political_power = -60
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 240
			}
		}
	}
}

country_event = { #空军成员中的流言
	id = TRI_paranoia.22
	title = TRI_paranoia.22.t
	desc = TRI_paranoia.22.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.22.a
		set_temp_variable = { TRI_unity_change = -2 }
		TRI_change_unity = yes
		add_ideas = TRI_inspected_airforce
		TRI_paranoia_decrease_10 = yes

		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.22.b

		trigger = {
			NOT = { has_political_power < 50 }
		}

		add_political_power = -50
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 200
			}
		}
	}
}
country_event = { #反破坏分子运动（空军）
	id = TRI_paranoia.23
	title = TRI_paranoia.23.t
	desc = TRI_paranoia.23.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	option = { #鲨鲨鲨
		name = TRI_paranoia.23.a
		set_temp_variable = { TRI_unity_change = -2 }
		TRI_change_unity = yes
		add_timed_idea = {
			idea = TRI_ground_based_training
			days = 180
		}
		TRI_paranoia_decrease_10 = yes

		ai_chance = {
			base = 10
		}
	}
	option = { #停停停
		name = TRI_paranoia.23.b

		trigger = {
			NOT = { has_political_power < 60 }
		}

		add_political_power = -60
		TRI_paranoia_increase_10 = yes
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 1.5
				has_political_power > 200
			}
		}
	}
}
country_event = { #对社团的调查
	id = TRI_paranoia.31
	title = TRI_paranoia.31.t
	desc = TRI_paranoia.31.desc
	picture = GFX_TRI_event_3
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { check_variable = { TRI_inspected_assosiation = token:TRI_paranoia_association_0 } }
			set_variable = { selected_association_t = token:TRI_parliament_association_3 }
		}
		else_if = {
			limit = { check_variable = { TRI_inspected_assosiation = token:TRI_paranoia_association_1 } }
			set_variable = { selected_association_t = token:TRI_parliament_association_5 }
		}
		else_if = {
			limit = { check_variable = { TRI_inspected_assosiation = token:TRI_paranoia_association_2 } }
			set_variable = { selected_association_t = token:TRI_parliament_association_4 }
		}
		else = {
			set_variable = { selected_association_t = token:TRI_parliament_association_6 }
		}
		set_country_flag = { flag = TRI_paranoia_random_purge_cooldown days = 14 }
		set_variable = { TRI_purge_chance_time_accumulation = 0 }
		set_variable = { TRI_political_focus_duration = 0 }
	}

	option = { #鲨鲨鲨
		name = TRI_paranoia.31.a
		TRI_unity_decrease_5 = yes

		set_temp_variable = { association = selected_association_t }
		set_temp_variable = { loyalty_change = 0.2 }
		TRI_parliament_loyalty_change = yes
		set_temp_variable = { radicalism_change = 0.1 }
		TRI_parliament_radicalism_change = yes
		TRI_paranoia_decrease_20 = yes

		clear_variable = selected_association_t
		clr_country_flag = TRI_paranoia_association_inspection_flag
		set_variable = { TRI_inspected_assosiation = TRI_paranoia_association^TRI_paranoia_selected_association }
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				check_variable = { TRI_nagisa_paranoia_total < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 2
				check_variable = { TRI_unity > 75 }
			}
		}
	}
	option = { #停停停
		name = TRI_paranoia.31.b
		TRI_paranoia_decrease_10 = yes

		set_temp_variable = { loyalty_change = 0.1 }
		set_temp_variable = { association = selected_association_t }
		TRI_parliament_loyalty_change = yes
		
		clear_variable = selected_association_t
		clr_country_flag = TRI_paranoia_association_inspection_flag
		set_variable = { TRI_inspected_assosiation = TRI_paranoia_association^TRI_paranoia_selected_association }
		ai_chance = {
			base = 5
			modifier = {
				factor = 0.8
				check_variable = { TRI_nagisa_paranoia_total < 50 }
			}
			modifier = {
				factor = 0.5
				check_variable = { TRI_nagisa_paranoia_rank > 3 }
			}
			modifier = {
				factor = 1.2
				check_variable = { TRI_nagisa_paranoia_rank < 2 }
			}
			modifier = {
				factor = 2
				check_variable = { TRI_unity > 75 }
			}
		}
	}
}
country_event = {
	id = TRI_paranoia.100
	hidden = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = TRI_paranoia_system_active
	}
	immediate = {
		hidden_effect = {
			set_temp_variable = { event_days = 14 }
			if = {
				limit = { NOT = { has_country_flag = TRI_paranoia_random_purge_cooldown } }
				#每级偏执度等级+5%
				set_temp_variable = { TRI_purge_chance_paranoia = TRI_nagisa_paranoia_rank }
				multiply_temp_variable = { TRI_purge_chance_paranoia = 5 }
				add_to_variable = { TRI_purge_chance = TRI_purge_chance_paranoia }
				#随政治国策累积，每140天+10%
				set_temp_variable = { pfd = TRI_political_focus_duration }
				while_loop_effect = {
					limit = { 
						check_variable = { pfd > 139 }
					}
					subtract_from_temp_variable = { pfd = 140 }
					add_to_temp_variable = { TRI_purge_chance = 10 }
				}
				clamp_variable = {
					var = TRI_purge_chance
					min = 0
					max = 100
				}
				#按照概率决定是否清洗
				random = {
					chance = TRI_purge_chance
					random_list = {
						1 = {
							modifier = {
								factor = 0
								BA_TRI_can_purge_administration = no
							}
							TRI_purge_administration = yes
						}
						1 = {
							modifier = {
								factor = 0
								BA_TRI_can_purge_army = no
							}
							TRI_purge_army = yes
						}
						1 = {
							modifier = {
								factor = 0
								BA_TRI_can_purge_airforce = no
							}
							TRI_purge_airforce = yes
						}
					}
					add_to_temp_variable = { event_days = 14 }
				}
			}

			country_event = {
				id = TRI_paranoia.100
				days = event_days
			}
		}
	}
}
